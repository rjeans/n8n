# Ansible Inventory for n8n GCP Deployment
#
# Copy this file to inventory.ini and update with your details:
#   cp inventory.ini.example inventory.ini
#
# SSH Access via Google Identity-Aware Proxy (IAP)
# No public IP - all SSH access is via IAP tunnel
#
# Prerequisites:
#   1. IAP API enabled: gcloud services enable iap.googleapis.com
#   2. IAM permissions granted (see docs/IAP-SETUP.md)
#
# SSH Key Options:
#   Option 1: Use 1Password SSH agent (recommended)
#     SSH keys automatically provided by 1Password agent
#
#   Option 2: Use local SSH key
#     ansible_ssh_private_key_file=~/.ssh/google_compute_engine
#
#   Option 3: Use SSH agent
#     Remove ansible_ssh_private_key_file line and ensure key is in agent

[n8n_servers]
# Instance name (not IP) - IAP uses instance name for routing
# Update instance name and project/zone if different
n8n-server ansible_user=ubuntu

[n8n_servers:vars]
# Python interpreter (Ubuntu 22.04 uses python3)
ansible_python_interpreter=/usr/bin/python3

# SSH via IAP - ProxyCommand tunnels through Google's private network
# Update PROJECT_ID and ZONE for your environment
ansible_ssh_common_args='-o ProxyCommand="gcloud compute start-iap-tunnel n8n-server 22 --listen-on-stdin --project=YOUR_PROJECT_ID --zone=YOUR_ZONE --verbosity=warning" -o StrictHostKeyChecking=accept-new'
